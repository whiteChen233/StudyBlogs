# 操作系统

---
硬盘容量分为非格式化容量和格式化容量两种，计算公式如下：

- `非格式化容量=面数x(磁道数/面)x内圆周长x最大位密度`
- `格式化容量=面数x(磁道数/面)x(扇区数/道)x(字节数/扇区)`

---
常用的I/O接口编址方法有两种：一是与内存单元统一编址，二是单独编址。

与内存单元统一编址方式下，是将I/O接口中有关的寄存器或存储部件看作存储器单元，与主存中的存储单元统一编址。这样，内存地址和接口地址统一在一个公共的地址空间里，对I/O接口的访问就如同对主存单元的访问一样，可以用访问内存单元的指令访问I/O接口。

I/O接口单独编址是指通过设置单独的I/O地址空间，为接口中的有关寄存器或存储部件分配地址码，需要设置专门的I/O指令进行访问。这种编址方式的优点是不占用主存的地址空间，访问主存的指令和访问接口的指令不同，在程序中容易使用和辨认。

---
中断方式和DMA方式时，CPU可以与外设并行工作

- 程序查询方式：由CPU主动查询外设的状态，在外设准备好时传输数据
- 中断方式：在外设准备好是给CPU发中断信号，之后再进行数据传输（在外设未发送中断信号前，CPU可以执行其他任务）
- DMA方式：CPU只需要向DMA控制器下达指令，让DMA控制器来处理数据的传送，完成后反馈给CPU即可

---
信号量机制：信号量机制是一种有效的进行同步与互斥工具。一般用S表示，`S≥0`表示某资源可用数，`S<0`表示阻塞队列中等待该资源的进程数。

`PV操作`是实现进程童虎与互斥的常用方法。P表示申请一个资源，V表示释放一个资源。

- `P操作`：`S=S-1`，若`S≥0`，则执行P操作的进程继续执行；若`S<0`，则该进程为阻塞状态，进入阻塞队列
- `V操作`：`S=S+1`，若`S>0`，则执行V操作的进程继续执行；若`S=0`，则阻塞状态唤醒一个进程，计入就绪队列，然后V操作的进程继续执行

**箭头的起点就是V操作，箭头的终点就是P操作。**

---
磁盘管理程序可以对磁盘进行初始化、创建卷，并且可以选择使用FAT、FAT32或NTFS文件系统格式化卷

---
计算机硬件 → 操作系统 → 系统软件 → 应用软件

- 系统软件开发人员：计算机硬件、操作系统
- 应用软件开发人员：系统软件
- 最终用户：应用软件

---
系统字长32位，一个字可以记录32个物理块的使用情况。

`物理块数量=磁盘容量/物理块大小`

`字的数量=物理块数量/字长`

---
避免死锁的`最少资源数 = SUM(每个进程需要的资源数)-进程数+1`

---
分时系统中把CPU的时间分成很短的时间片轮流的分配给各个终端用户，当系统中用户数量为n，时间片为q时，系统对于每个用户的响应时间等于n*q

---
操作系统有两个重要重用：

1. 通过资源管理提高计算机系统的效率，操作系统是计算机系统的资源管理者，它含有对系统软/硬件资源实施管理的一组程序
2. 改善人机界面，向用户提供友好的工作环境

---
磁盘调度中，先进行移臂调度寻找磁道，在进行旋转调度寻找扇区

---
常用的进程控制块的组织方式有连接方式和索引方式：

- 采用链接方式是把具有同一状态的PCB，用其中的链接字链接成一个队列。这样，可以形成就绪队列、若干个阻塞队列和空白队列等。对其中的就绪队列常按进程优先级的高低排列，把优先级高的进程的PCB排在队列前面。此外，也可根据阻塞原因的不同而把处于阻塞状态的进程的PCB排成等待I/O操作完成的认列和等待分配内存的队列等。
- 采用索引方式是系统根据所有进程的状态建立若干索引表。例如，就绪索引表、阻塞索引表等，并把各索引表在内存的首地址记录在内存的一些专用单元中。在每个索引表的表目中，记录具有相应状态的某个PCB在PCB表中的地址。

---
移臂调度算法：又叫磁盘调度算法，根本目的在于有效利用磁盘，保证磁盘的快速访问。（柱面号即磁道编号）

1. 先来先服务算法（FCFS）：由请求的先后顺序确定执行顺序，可随时改变移臂方向
2. 最短寻找时间优先调度算法（SSTF）：挑选寻找时间最短的那个请求执行，可随时改变移臂方向
3. 电梯调度算法（SCAN）：从移臂当前位置沿移动方向选择最近的那个柱面的访问者来执行，若该方向上无请求访问时，就改变移臂的方向再选择
4. 单向扫描算法（CSCAN）：总是从0号柱面开始向里道扫描，按照各自所要访问的柱面位置的次序去选择访问者
