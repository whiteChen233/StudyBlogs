import{u as O,i as $,j as ee,k as U,l as te,n as se,t as ae,p as oe,q as V,s as b,v as ne,x as z,y as s,z as M,A as _,R as I,B as le,C as re,D as ce,E as ie,O as ue,P as de,G as me,H as he,I as ve,J as ye,K as pe,L as ge,M as Ce,N as L}from"./app-Bf7Vs64-.js";const fe=["/","/docs/","/docs/intro.html","/docs/essay/SlowSlowSong.html","/docs/essay/TearsOfRouge.html","/docs/essay/","/docs/essay/love.html","/docs/essay/me.html","/docs/essay/rain.html","/docs/links/","/docs/note/QCCSTP/","/docs/note/back-end/","/docs/note/design/","/docs/note/front-end/","/docs/note/tools/git.html","/docs/note/tools/gradle.html","/docs/note/tools/idea.html","/docs/note/tools/","/docs/note/tools/maven.html","/docs/note/tools/shell.html","/docs/note/tools/vs-code.html","/docs/series/games/","/docs/series/step-by-step/","/docs/series/step-by-step/java-installation-and-configuration.html","/docs/series/step-by-step/quickly-build-personal-documents.html","/docs/note/QCCSTP/software-design-engineer/algorithms-and-data-structures.html","/docs/note/QCCSTP/software-design-engineer/basic-knowledge-of-network-and-multimedia.html","/docs/note/QCCSTP/software-design-engineer/computer-composition-and-structure.html","/docs/note/QCCSTP/software-design-engineer/database-technology.html","/docs/note/QCCSTP/software-design-engineer/fundamentals-of-software-engineering.html","/docs/note/QCCSTP/software-design-engineer/object-oriented-technology.html","/docs/note/QCCSTP/software-design-engineer/operating-system.html","/docs/note/QCCSTP/software-design-engineer/program-language.html","/docs/note/QCCSTP/software-design-engineer/standardization-and-intellectual-property.html","/docs/note/QCCSTP/software-design-engineer/start.html","/docs/note/QCCSTP/software-design-engineer/system-development-and-operation.html","/docs/note/QCCSTP/system-architect/case-analysis.html","/docs/note/QCCSTP/system-architect/computer-composition-and-architecture.html","/docs/note/QCCSTP/system-architect/computer-network.html","/docs/note/QCCSTP/system-architect/database-system.html","/docs/note/QCCSTP/system-architect/design-thesis.html","/docs/note/QCCSTP/system-architect/enterprise-informatization-strategy-and-implementation.html","/docs/note/QCCSTP/system-architect/intellectual-property-and-standardization.html","/docs/note/QCCSTP/system-architect/mathematics-and-economic-management.html","/docs/note/QCCSTP/system-architect/operating-system.html","/docs/note/QCCSTP/system-architect/project-management.html","/docs/note/QCCSTP/system-architect/software-architecture-design.html","/docs/note/QCCSTP/system-architect/software-engineering.html","/docs/note/QCCSTP/system-architect/start.html","/docs/note/QCCSTP/system-architect/system-configuration-and-performance-evaluation.html","/docs/note/QCCSTP/system-architect/system-reliability-analysis-and-design.html","/docs/note/QCCSTP/system-architect/system-security-analysis-and-design.html","/docs/note/back-end/java/Collection.html","/docs/note/back-end/java/JVM.html","/docs/note/back-end/java/SPI.html","/docs/note/back-end/java/","/docs/note/back-end/spring/","/docs/note/design/UML/UML.html","/docs/note/front-end/ES6/Promise.html","/docs/note/front-end/Vue2/Component.html","/docs/note/front-end/Vue2/Modules.html","/docs/note/front-end/Vue2/Runtime.html","/docs/note/front-end/Vue2/Slot.html","/docs/note/front-end/Vue2/Vue_CLI.html","/docs/note/front-end/Vue2/Vue_Router.html","/docs/note/front-end/Vue2/Vuex.html","/docs/note/front-end/Vue2/Webpack.html","/docs/note/front-end/Vue3/","/404.html","/category/","/tag/","/article/","/star/","/timeline/"],Se="SEARCH_PRO_QUERY_HISTORY",h=O(Se,[]),Qe=()=>{const{queryHistoryCount:a}=L,o=a>0;return{enabled:o,queryHistory:h,addQueryHistory:n=>{o&&(h.value.length<a?h.value=Array.from(new Set([n,...h.value])):h.value=Array.from(new Set([n,...h.value.slice(0,a-1)])))},removeQueryHistory:n=>{h.value=[...h.value.slice(0,n),...h.value.slice(n+1)]}}},q=a=>fe[a.id]+("anchor"in a?`#${a.anchor}`:""),Pe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:x}=L,v=O(Pe,[]),Te=()=>{const a=x>0;return{enabled:a,resultHistory:v,addResultHistory:o=>{if(a){const n={link:q(o),display:o.display};"header"in o&&(n.header=o.header),v.value.length<x?v.value=[n,...v.value]:v.value=[n,...v.value.slice(0,x-1)]}},removeResultHistory:o=>{v.value=[...v.value.slice(0,o),...v.value.slice(o+1)]}}},we=a=>{const o=ue(),n=U(),{search:P,terminate:d}=de(),p=V(!1),g=me([]);return he(()=>{const y=()=>{g.value=[],p.value=!1},T=Ce(C=>{p.value=!0,C?P({type:"search",query:C,locale:n.value,options:o.value}).then(m=>{g.value=m,p.value=!1}).catch(m=>{console.error(m),y()}):y()},L.searchDelay);z([a,n],()=>T(a.value),{immediate:!0}),ve(()=>{d()})}),{searching:p,results:g}};var Re=$({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:o}){const n=ee(),P=U(),d=te(se),{enabled:p,addQueryHistory:g,queryHistory:y,removeQueryHistory:T}=Qe(),{enabled:C,resultHistory:m,addResultHistory:j,removeResultHistory:F}=Te(),A=p||C,w=ae(a,"query"),{results:f,searching:B}=we(w),l=oe({isQuery:!0,index:0}),i=V(0),u=V(0),D=b(()=>A&&(y.value.length>0||m.value.length>0)),k=b(()=>f.value.length>0),R=b(()=>f.value[i.value]||null),J=()=>{const{isQuery:e,index:t}=l;t===0?(l.isQuery=!e,l.index=e?m.value.length-1:y.value.length-1):l.index=t-1},Y=()=>{const{isQuery:e,index:t}=l;t===(e?y.value.length-1:m.value.length-1)?(l.isQuery=!e,l.index=0):l.index=t+1},G=()=>{i.value=i.value>0?i.value-1:f.value.length-1,u.value=R.value.contents.length-1},K=()=>{i.value=i.value<f.value.length-1?i.value+1:0,u.value=0},N=()=>{u.value<R.value.contents.length-1?u.value+=1:K()},W=()=>{u.value>0?u.value-=1:G()},H=e=>e.map(t=>ye(t)?t:s(t[0],t[1])),X=e=>{if(e.type==="customField"){const t=pe[e.index]||"$content",[r,Q=""]=ge(t)?t[P.value].split("$content"):t.split("$content");return e.display.map(c=>s("div",H([r,...c,Q])))}return e.display.map(t=>s("div",H(t)))},S=()=>{i.value=0,u.value=0,o("updateQuery",""),o("close")};return ne("keydown",e=>{if(a.isFocusing){if(k.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=R.value.contents[u.value];g(a.query),j(t),n.push(q(t)),S()}}else if(C){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=l;l.isQuery?(o("updateQuery",y.value[t]),e.preventDefault()):(n.push(m.value[t].link),S())}}}}),z([i,u],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:w.value?!k.value:!D.value}],id:"search-pro-results"},w.value===""?A?D.value?[p?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},d.value.queryHistory),y.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:l.isQuery&&l.index===t}],onClick:()=>{o("updateQuery",e)}},[s(M,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:r=>{r.preventDefault(),r.stopPropagation(),T(t)}})]))])):null,C?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},d.value.resultHistory),m.value.map((e,t)=>s(I,{to:e.link,class:["search-pro-result-item",{active:!l.isQuery&&l.index===t}],onClick:()=>{S()}},()=>[s(M,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(r=>H(r)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:r=>{r.preventDefault(),r.stopPropagation(),F(t)}})]))])):null]:d.value.emptyHistory:d.value.emptyResult:B.value?s(le,{hint:d.value.searching}):k.value?s("ul",{class:"search-pro-result-list"},f.value.map(({title:e,contents:t},r)=>{const Q=i.value===r;return s("li",{class:["search-pro-result-list-item",{active:Q}]},[s("div",{class:"search-pro-result-title"},e||d.value.defaultTitle),t.map((c,Z)=>{const E=Q&&u.value===Z;return s(I,{to:q(c),class:["search-pro-result-item",{active:E,"aria-selected":E}],onClick:()=>{g(a.query),j(c),S()}},()=>[c.type==="text"?null:s(c.type==="title"?re:c.type==="heading"?ce:ie,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?s("div",{class:"content-header"},c.header):null,s("div",X(c))])])})])})):d.value.emptyResult)}});export{Re as default};
