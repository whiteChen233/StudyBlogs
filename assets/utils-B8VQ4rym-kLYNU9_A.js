var pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var x=Uint8Array,P=Uint16Array,Mr=Int32Array,lr=new x([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),or=new x([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gr=new x([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sr=function(r,a){for(var e=new P(31),n=0;n<31;++n)e[n]=a+=1<<r[n-1];for(var f=new Mr(e[30]),n=1;n<30;++n)for(var v=e[n];v<e[n+1];++v)f[v]=v-e[n]<<5|n;return{b:e,r:f}},Er=Sr(lr,2),mr=Er.b,br=Er.r;mr[28]=258,br[258]=28;var Ur=Sr(or,0),Pr=Ur.b,Tr=Ur.r,sr=new P(32768);for(var g=0;g<32768;++g){var $=(g&43690)>>1|(g&21845)<<1;$=($&52428)>>2|($&13107)<<2,$=($&61680)>>4|($&3855)<<4,sr[g]=(($&65280)>>8|($&255)<<8)>>1}var N=function(r,a,e){for(var n=r.length,f=0,v=new P(a);f<n;++f)r[f]&&++v[r[f]-1];var t=new P(a);for(f=1;f<a;++f)t[f]=t[f-1]+v[f-1]<<1;var u;if(e){u=new P(1<<a);var c=15-a;for(f=0;f<n;++f)if(r[f])for(var o=f<<4|r[f],l=a-r[f],b=t[r[f]-1]++<<l,k=b|(1<<l)-1;b<=k;++b)u[sr[b]>>c]=o}else for(u=new P(n),f=0;f<n;++f)r[f]&&(u[f]=sr[t[r[f]-1]++]>>15-r[f]);return u},_=new x(288);for(var g=0;g<144;++g)_[g]=8;for(var g=144;g<256;++g)_[g]=9;for(var g=256;g<280;++g)_[g]=7;for(var g=280;g<288;++g)_[g]=8;var fr=new x(32);for(var g=0;g<32;++g)fr[g]=5;var Rr=N(_,9,0),Wr=N(_,9,1),jr=N(fr,5,0),Hr=N(fr,5,1),hr=function(r){for(var a=r[0],e=1;e<r.length;++e)r[e]>a&&(a=r[e]);return a},J=function(r,a,e){var n=a/8|0;return(r[n]|r[n+1]<<8)>>(a&7)&e},cr=function(r,a){var e=a/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(a&7)},xr=function(r){return(r+7)/8|0},ir=function(r,a,e){return(a==null||a<0)&&(a=0),(e==null||e>r.length)&&(e=r.length),new x(r.subarray(a,e))},Jr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],j=function(r,a,e){var n=new Error(a||Jr[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,j),!e)throw n;return n},Kr=function(r,a,e,n){var f=r.length,v=0;if(!f||a.f&&!a.l)return new x(0);var t=!e;e=new x(f*3);var u=function(vr){var rr=e.length;if(vr>rr){var ar=new x(Math.max(rr*2,vr));ar.set(e),e=ar}},c=a.f||0,o=a.p||0,l=a.b||0,b=a.l,k=a.d,s=a.m,z=a.n,y=f*8;do{if(!b){c=J(r,o,1);var R=J(r,o+1,3);if(o+=3,R)if(R==1)b=Wr,k=Hr,s=9,z=5;else if(R==2){var m=J(r,o,31)+257,U=J(r,o+10,15)+4,I=m+J(r,o+5,31)+1;o+=14;for(var C=new x(I),h=new x(19),i=0;i<U;++i)h[gr[i]]=J(r,o+i*3,7);o+=U*3;for(var S=hr(h),Y=(1<<S)-1,O=N(h,S,1),i=0;i<I;){var Q=O[J(r,o,Y)];o+=Q&15;var F=Q>>4;if(F<16)C[i++]=F;else{var T=0,E=0;for(F==16?(E=3+J(r,o,3),o+=2,T=C[i-1]):F==17?(E=3+J(r,o,7),o+=3):F==18&&(E=11+J(r,o,127),o+=7);E--;)C[i++]=T}}var D=C.subarray(0,m),w=C.subarray(m);s=hr(D),z=hr(w),b=N(D,s,1),k=N(w,z,1)}else j(1);else{var F=xr(o)+4,B=r[F-4]|r[F-3]<<8,H=F+B;if(H>f){j(0);break}u(l+B),e.set(r.subarray(F,H),l),a.b=l+=B,a.p=o=H*8,a.f=c;continue}if(o>y){j(0);break}}u(l+131072);for(var G=(1<<s)-1,K=(1<<z)-1,L=o;;L=o){var T=b[cr(r,o)&G],A=T>>4;if(o+=T&15,o>y){j(0);break}if(T||j(2),A<256)e[l++]=A;else if(A==256){L=o,b=null;break}else{var Z=A-254;if(A>264){var i=A-257,W=lr[i];Z=J(r,o,(1<<W)-1)+mr[i],o+=W}var q=k[cr(r,o)&K],M=q>>4;q||j(3),o+=q&15;var w=Pr[M];if(M>3){var W=or[M];w+=cr(r,o)&(1<<W)-1,o+=W}if(o>y){j(0);break}u(l+131072);var V=l+Z;if(l<w){var p=v-w,d=Math.min(w,V);for(p+l<0&&j(3);l<d;++l)e[l]=n[p+l]}for(;l<V;++l)e[l]=e[l-w]}}a.l=b,a.p=L,a.b=l,a.f=c,b&&(c=1,a.m=s,a.d=k,a.n=z)}while(!c);return l!=e.length&&t?ir(e,0,l):e.subarray(0,l)},X=function(r,a,e){e<<=a&7;var n=a/8|0;r[n]|=e,r[n+1]|=e>>8},er=function(r,a,e){e<<=a&7;var n=a/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},wr=function(r,a){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var f=e.length,v=e.slice();if(!f)return{t:Ir,l:0};if(f==1){var t=new x(e[0].s+1);return t[e[0].s]=1,{t,l:1}}e.sort(function(U,I){return U.f-I.f}),e.push({s:-1,f:25001});var u=e[0],c=e[1],o=0,l=1,b=2;for(e[0]={s:-1,f:u.f+c.f,l:u,r:c};l!=f-1;)u=e[e[o].f<e[b].f?o++:b++],c=e[o!=l&&e[o].f<e[b].f?o++:b++],e[l++]={s:-1,f:u.f+c.f,l:u,r:c};for(var k=v[0].s,n=1;n<f;++n)v[n].s>k&&(k=v[n].s);var s=new P(k+1),z=yr(e[l-1],s,0);if(z>a){var n=0,y=0,R=z-a,F=1<<R;for(v.sort(function(I,C){return s[C.s]-s[I.s]||I.f-C.f});n<f;++n){var B=v[n].s;if(s[B]>a)y+=F-(1<<z-s[B]),s[B]=a;else break}for(y>>=R;y>0;){var H=v[n].s;s[H]<a?y-=1<<a-s[H]++-1:++n}for(;n>=0&&y;--n){var m=v[n].s;s[m]==a&&(--s[m],++y)}z=a}return{t:new x(s),l:z}},yr=function(r,a,e){return r.s==-1?Math.max(yr(r.l,a,e+1),yr(r.r,a,e+1)):a[r.s]=e},kr=function(r){for(var a=r.length;a&&!r[--a];);for(var e=new P(++a),n=0,f=r[0],v=1,t=function(c){e[n++]=c},u=1;u<=a;++u)if(r[u]==f&&u!=a)++v;else{if(!f&&v>2){for(;v>138;v-=138)t(32754);v>2&&(t(v>10?v-11<<5|28690:v-3<<5|12305),v=0)}else if(v>3){for(t(f),--v;v>6;v-=6)t(8304);v>2&&(t(v-3<<5|8208),v=0)}for(;v--;)t(f);v=1,f=r[u]}return{c:e.subarray(0,n),n:a}},nr=function(r,a){for(var e=0,n=0;n<a.length;++n)e+=r[n]*a[n];return e},Or=function(r,a,e){var n=e.length,f=xr(a+2);r[f]=n&255,r[f+1]=n>>8,r[f+2]=r[f]^255,r[f+3]=r[f+1]^255;for(var v=0;v<n;++v)r[f+v+4]=e[v];return(f+4+n)*8},zr=function(r,a,e,n,f,v,t,u,c,o,l){X(a,l++,e),++f[256];for(var b=wr(f,15),k=b.t,s=b.l,z=wr(v,15),y=z.t,R=z.l,F=kr(k),B=F.c,H=F.n,m=kr(y),U=m.c,I=m.n,C=new P(19),h=0;h<B.length;++h)++C[B[h]&31];for(var h=0;h<U.length;++h)++C[U[h]&31];for(var i=wr(C,7),S=i.t,Y=i.l,O=19;O>4&&!S[gr[O-1]];--O);var Q=o+5<<3,T=nr(f,_)+nr(v,fr)+t,E=nr(f,k)+nr(v,y)+t+14+3*O+nr(C,S)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&Q<=T&&Q<=E)return Or(a,l,r.subarray(c,c+o));var D,w,G,K;if(X(a,l,1+(E<T)),l+=2,E<T){D=N(k,s,0),w=k,G=N(y,R,0),K=y;var L=N(S,Y,0);X(a,l,H-257),X(a,l+5,I-1),X(a,l+10,O-4),l+=14;for(var h=0;h<O;++h)X(a,l+3*h,S[gr[h]]);l+=3*O;for(var A=[B,U],Z=0;Z<2;++Z)for(var W=A[Z],h=0;h<W.length;++h){var q=W[h]&31;X(a,l,L[q]),l+=S[q],q>15&&(X(a,l,W[h]>>5&127),l+=W[h]>>12)}}else D=Rr,w=_,G=jr,K=fr;for(var h=0;h<u;++h){var M=n[h];if(M>255){var q=M>>18&31;er(a,l,D[q+257]),l+=w[q+257],q>7&&(X(a,l,M>>23&31),l+=lr[q]);var V=M&31;er(a,l,G[V]),l+=K[V],V>3&&(er(a,l,M>>5&8191),l+=or[V])}else er(a,l,D[M]),l+=w[M]}return er(a,l,D[256]),l+w[256]},Nr=new Mr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ir=new x(0),Qr=function(r,a,e,n,f,v){var t=v.z||r.length,u=new x(n+t+5*(1+Math.ceil(t/7e3))+f),c=u.subarray(n,u.length-f),o=v.l,l=(v.r||0)&7;if(a){l&&(c[0]=v.r>>3);for(var b=Nr[a-1],k=b>>13,s=b&8191,z=(1<<e)-1,y=v.p||new P(32768),R=v.h||new P(z+1),F=Math.ceil(e/3),B=2*F,H=function(ur){return(r[ur]^r[ur+1]<<F^r[ur+2]<<B)&z},m=new Mr(25e3),U=new P(288),I=new P(32),C=0,h=0,i=v.i||0,S=0,Y=v.w||0,O=0;i+2<t;++i){var Q=H(i),T=i&32767,E=R[Q];if(y[T]=E,R[Q]=T,Y<=i){var D=t-i;if((C>7e3||S>24576)&&(D>423||!o)){l=zr(r,c,0,m,U,I,h,S,O,i-O,l),S=C=h=0,O=i;for(var w=0;w<286;++w)U[w]=0;for(var w=0;w<30;++w)I[w]=0}var G=2,K=0,L=s,A=T-E&32767;if(D>2&&Q==H(i-A))for(var Z=Math.min(k,D)-1,W=Math.min(32767,i),q=Math.min(258,D);A<=W&&--L&&T!=E;){if(r[i+G]==r[i+G-A]){for(var M=0;M<q&&r[i+M]==r[i+M-A];++M);if(M>G){if(G=M,K=A,M>Z)break;for(var V=Math.min(A,M-2),p=0,w=0;w<V;++w){var d=i-A+w&32767,vr=y[d],rr=d-vr&32767;rr>p&&(p=rr,E=d)}}}T=E,E=y[T],A+=T-E&32767}if(K){m[S++]=268435456|br[G]<<18|Tr[K];var ar=br[G]&31,Fr=Tr[K]&31;h+=lr[ar]+or[Fr],++U[257+ar],++I[Fr],Y=i+G,++C}else m[S++]=r[i],++U[r[i]]}}for(i=Math.max(i,Y);i<t;++i)m[S++]=r[i],++U[r[i]];l=zr(r,c,o,m,U,I,h,S,O,i-O,l),o||(v.r=l&7|c[l/8|0]<<3,l-=7,v.h=R,v.p=y,v.i=i,v.w=Y)}else{for(var i=v.w||0;i<t+o;i+=65535){var tr=i+65535;tr>=t&&(c[l/8|0]=o,tr=t),l=Or(c,l+1,r.subarray(i,tr))}v.i=t}return ir(u,0,n+xr(l)+f)},qr=function(){var r=1,a=0;return{p:function(e){for(var n=r,f=a,v=e.length|0,t=0;t!=v;){for(var u=Math.min(t+2655,v);t<u;++t)f+=n+=e[t];n=(n&65535)+15*(n>>16),f=(f&65535)+15*(f>>16)}r=n,a=f},d:function(){return r%=65521,a%=65521,(r&255)<<24|(r&65280)<<8|(a&255)<<8|a>>8}}},Vr=function(r,a,e,n,f){if(!f&&(f={l:1},a.dictionary)){var v=a.dictionary.subarray(-32768),t=new x(v.length+r.length);t.set(v),t.set(r,v.length),r=t,f.w=v.length}return Qr(r,a.level==null?6:a.level,a.mem==null?f.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+a.mem,e,n,f)},Br=function(r,a,e){for(;e;++a)r[a]=e,e>>>=8},Xr=function(r,a){var e=a.level,n=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=n<<6|(a.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,a.dictionary){var f=qr();f.p(a.dictionary),Br(r,2,f.d())}},Yr=function(r,a){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&j(6,"invalid zlib data"),(r[1]>>5&1)==+!a&&j(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function Zr(r,a){a||(a={});var e=qr();e.p(r);var n=Vr(r,a,a.dictionary?6:2,4);return Xr(n,a),Br(n,n.length-4,e.d()),n}function $r(r,a){return Kr(r.subarray(Yr(r,a),-4),{i:2},a,a)}var Ar=typeof TextEncoder<"u"&&new TextEncoder,Cr=typeof TextDecoder<"u"&&new TextDecoder,_r=0;try{Cr.decode(Ir,{stream:!0}),_r=1}catch{}var Lr=function(r){for(var a="",e=0;;){var n=r[e++],f=(n>127)+(n>223)+(n>239);if(e+f>r.length)return{s:a,r:ir(r,e-1)};f?f==3?(n=((n&15)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,a+=String.fromCharCode(55296|n>>10,56320|n&1023)):f&1?a+=String.fromCharCode((n&31)<<6|r[e++]&63):a+=String.fromCharCode((n&15)<<12|(r[e++]&63)<<6|r[e++]&63):a+=String.fromCharCode(n)}};function Dr(r,a){if(a){for(var e=new x(r.length),n=0;n<r.length;++n)e[n]=r.charCodeAt(n);return e}if(Ar)return Ar.encode(r);for(var f=r.length,v=new x(r.length+(r.length>>1)),t=0,u=function(l){v[t++]=l},n=0;n<f;++n){if(t+5>v.length){var c=new x(t+8+(f-n<<1));c.set(v),v=c}var o=r.charCodeAt(n);o<128||a?u(o):o<2048?(u(192|o>>6),u(128|o&63)):o>55295&&o<57344?(o=65536+(o&1047552)|r.charCodeAt(++n)&1023,u(240|o>>18),u(128|o>>12&63),u(128|o>>6&63),u(128|o&63)):(u(224|o>>12),u(128|o>>6&63),u(128|o&63))}return ir(v,0,t)}function Gr(r,a){if(a){for(var e="",n=0;n<r.length;n+=16384)e+=String.fromCharCode.apply(null,r.subarray(n,n+16384));return e}else{if(Cr)return Cr.decode(r);var f=Lr(r),v=f.s,e=f.r;return e.length&&j(8),v}}function ra(r,a=100){let e;return(...n)=>{e&&clearTimeout(e),e=setTimeout(()=>{r(...n)},a)}}function aa(r){const a=Dr(r),e=Zr(a,{level:9}),n=Gr(e,!0);return btoa(n)}function ea(r){const a=atob(r);if(a.startsWith("xÚ")){const e=Dr(a,!0),n=$r(e);return Gr(n)}return decodeURIComponent(escape(a))}export{ea as a,pr as c,ra as d,dr as g,aa as u};
