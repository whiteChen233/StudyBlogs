import{u as D,v as B,i as G,x as J,y as A,z as K,A as T,B as U,k as b,l as S,C as X,D as I,q as s,R as Q,E as Y,H as Z,G as _,I as ee,J as te,K as se,L as ae,s as le,M as re,N as ue,O as oe,P as ne,Q as ce,S as ie}from"./app-743b4359.js";const ve=()=>{const e=new Worker(`/${D.worker}`,{}),n=[];return e.addEventListener("message",({data:r})=>{const{resolve:p}=n.shift();p(r)}),{search:(r,p,m)=>new Promise((o,d)=>{e.postMessage({query:r,locale:p,options:m}),n.push({resolve:o,reject:d})}),terminate:()=>{e.terminate(),n.forEach(({reject:r})=>r(new Error("Worker has been terminated.")))}}};var y=(e=>(e.title="t",e.heading="h",e.text="p",e.custom="c",e))(y||{}),l=(e=>(e.type="t",e.key="k",e.anchor="a",e.header="h",e.index="i",e.display="d",e))(l||{});const he="search-pro-result-history",h=B(he,[]),pe=()=>{const{resultHistoryCount:e}=D,n=e>0;return{enabled:n,resultHistory:h,addResultHistory:r=>{n&&(h.value.length<e?h.value=[r,...h.value]:h.value=[r,...h.value.slice(0,e-1)])},removeResultHistory:r=>{h.value=[...h.value.slice(0,r),...h.value.slice(r+1)]}}},de=e=>{const n=ae(),r=A(),{search:p,terminate:m}=ve(),o=b(!1),d=le([]),R=()=>{d.value=[],o.value=!1},H=ce(g=>{o.value=!0,g?p(g,r.value,n).then(f=>{d.value=f,o.value=!1}).catch(f=>{console.error(f),R()}):R()},D.delay);return I([e,r],()=>H(e.value),{immediate:!0}),{searching:o,results:d,terminate:m}};var me=G({name:"SearchResult",props:{query:{type:String,required:!0}},emits:["close","updateQuery"],setup(e,{emit:n}){const r=re(),p=J(),m=A(),o=K(T),{addQueryHistory:d}=ue(),{enabled:R,resultHistory:H,addResultHistory:g,removeResultHistory:f}=pe(),$=U(e,"query"),{results:k,searching:O}=de($),i=b(0),u=b(0),P=S(()=>H.value.length>0),q=S(()=>k.value.length>0),x=S(()=>k.value[i.value]||null),C=t=>p.resolve({name:t[l.key],...l.anchor in t?{hash:`#${t[l.anchor]}`}:{}}).fullPath,F=()=>{i.value=i.value>0?i.value-1:k.value.length-1,u.value=x.value.contents.length-1},N=()=>{i.value=i.value<k.value.length-1?i.value+1:0,u.value=0},V=()=>{u.value<x.value.contents.length-1?u.value=u.value+1:N()},W=()=>{u.value>0?u.value=u.value-1:F()},E=t=>t.map(a=>ie(a)?a:s(a[0],a[1])),j=t=>{if(t[l.type]===y.custom){const a=oe[t[l.index]]||"$content",[v,w=""]=ne(a)?a[m.value].split("$content"):a.split("$content");return t[l.display].map(c=>E([v,...c,w])).flat()}return t[l.display].map(a=>E(a)).flat()},L=()=>{i.value=0,u.value=0,n("updateQuery",""),n("close")};return X("keydown",t=>{if(q.value){if(t.key==="ArrowUp")W();else if(t.key==="ArrowDown")V();else if(t.key==="Enter"){const a=x.value.contents[u.value],v=C(a);r.value.path!==v&&(d(e.query),g(a),p.push(v),L())}}}),I([i,u],()=>{var t;(t=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result",{empty:$.value?!q.value:!P.value}],id:"search-pro-results"},$.value===""?P.value?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.history),H.value.map((t,a)=>s(Q,{to:C(t),class:["search-pro-result-item",{active:u.value===a}],onClick:()=>{L()}},()=>[s(Y,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[t[l.type]===y.text&&t[l.header]?s("div",{class:"content-header"},t[l.header]):null,s("div",j(t))]),s("button",{class:"search-pro-close-icon",innerHTML:Z,onClick:v=>{v.preventDefault(),v.stopPropagation(),f(a)}})]))])):R?o.value.emptyHistory:o.value.emptyResult:O.value?s(_,{hint:o.value.searching}):q.value?s("ul",{class:"search-pro-result-list"},k.value.map(({title:t,contents:a},v)=>{const w=i.value===v;return s("li",{class:["search-pro-result-list-item",{active:w}]},[s("div",{class:"search-pro-result-title"},t||"Documentation"),a.map((c,z)=>{const M=w&&u.value===z;return s(Q,{to:C(c),class:["search-pro-result-item",{active:M,"aria-selected":M}],onClick:()=>{d(e.query),g(c),L()}},()=>[c[l.type]===y.text?null:s(c[l.type]===y.title?ee:c[l.type]===y.heading?te:se,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[c[l.type]===y.text&&c[l.header]?s("div",{class:"content-header"},c[l.header]):null,s("div",j(c))])])})])})):o.value.emptyResult)}});export{me as default};
